
name: WebTest

on: [push]

jobs:
  build:
    runs-on: ubuntu-20.04
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v5.0.0
        with:
          python-version: 3.12.2

      - name: Setup Web Application
        run: |
          python3 -m pip install robotframework && pip install robotframework-requests &&  pip install robotframework-seleniumlibrary \
          && pip install xvfbwrapper && pip install robotframework-xvfb && pip install certifi && pip install asn1crypto \
          && pip install bcrypt && pip install robotframework-sshlibrary && pip install cryptography && pip install pyOpenSSL \
          && pip install idna && pip install requests[security]


      - name: Instalar o Google Chrome
        run: |
          sudo wget -q https://storage.googleapis.com/chrome-for-testing-public/125.0.6422.78/linux64/chrome-headless-shell-linux64.zip
          sudo unzip chrome-headless-shell-linux64.zip
          sudo rm chrome-headless-shell-linux64.zip

      - name: Instalar o ChromeDriver
        run: |
          sudo wget -q https://storage.googleapis.com/chrome-for-testing-public/125.0.6422.112/linux64/chromedriver-linux64.zip
          sudo unzip chromedriver-linux64.zip
          sudo rm chromedriver-linux64.zip
          sudo mv chromedriver-linux64/chromedriver /usr
          sudo chmod +x /usr/chromedriver

      - name: Verificar instalação
        run: |
          which google-chrome
          which chromedriver
      
      - name: Run RF WEB Test
        run: |
          robot -d ./resultados TestesRobot
