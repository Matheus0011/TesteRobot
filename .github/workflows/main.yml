
name: WebTest

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v5.0.0
        with:
          python-version: 3.12.2

      - name: Setup Web Application
        run: |
          python3 -m pip install robotframework && pip install robotframework-requests &&  pip install robotframework-selenium2library \
          && pip install xvfbwrapper && pip install robotframework-xvfb && pip install certifi && pip install asn1crypto \
          && pip install bcrypt && pip install robotframework-sshlibrary && pip install cryptography && pip install pyOpenSSL \
          && pip install idna && pip install requests[security]


      - name: Chroem driver
        run: |
            wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \
            && dpkg -i google-chrome*.deb \
            && rm google-chrome*.deb \
            && wget -q https://chromedriver.storage.googleapis.com/89.0.4389.23/chromedriver_linux64.zip \
            && unzip chromedriver_linux64.zip \
            && rm chromedriver_linux64.zip \
            && mv chromedriver /usr/local/bin \
            && chmod +x /usr/local/bin/chromedriver

      
      - name: Run RF WEB Test
        run: |
          robot -d ./resultados -v TestesRobot.robot
